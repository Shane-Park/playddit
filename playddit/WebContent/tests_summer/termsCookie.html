<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>약관 동의 테스트 하기</title>
<script src="../js/jquery-3.5.1.min.js"></script>
<script>
	$(function(){
		$('#termsCookie').on('click', function(){
			var must1 = $('#must1:checked').val() == 'on';
			var must2 = $('#must2:checked').val() == 'on';
			var must3 = $('#must3:checked').val() == 'on';
			
			if(!(must1 && must2 && must3)){
				alert('필수약관은 반드시 선택해야 합니다.');
				return;
			}
			termsCookie();
		});
		
		$('#termsCookieCheck').on('click', function(){
			var cookie = "선택사항 1은" + getCookie("pick1") + "<br>";
			cookie += "선택사항 2은" + getCookie("pick2") + "<br>";
			cookie += "선택사항 3은" + getCookie("pick3") + "<br>";
			
			$('#check').html(cookie);
		})
	});
	
	
	termsCookie = function(){
		var pick1 = $('#pick1:checked').val() == 'on';
		var pick2 = $('#pick2:checked').val() == 'on';
		var pick3 = $('#pick3:checked').val() == 'on';
		
		setCookie("pick1", pick1, 1);
		setCookie("pick2", pick2, 1);
		setCookie("pick3", pick3, 1);
	}
	
	// 쿠키 저장
	function setCookie(name, value, exp){
		var date = new Date();
		date.setTime(date.getTime() + exp*24*60*60*1000);
		document.cookie = name+'='+escape(value)+';expires='+date.toUTCString()+';path=1';
	}
	
	// 저장한 쿠키 가져오기
	function getCookie(name) {
	  const value = `; ${document.cookie}`;
	  const parts = value.split(`; ${name}=`);
	  if (parts.length === 2) return unescape(parts.pop()).split(';').shift();
	}
</script>

</head>
<body>
 <input type="checkbox" name="agree" id="allchk"/>
                <label for="allchk">
                    <span class="chk"></span>
                    <h5>모두 동의합니다.</h5>
                </label>
                
                <div class="longbar"></div>
                
                <form id="condition" action="condition.jsp" method="get">
                    <div id="condiLeft">
                        <p><span class="red">*</span> 필수약관</p>
                        <ul class="conditions" id="must">
                            <li class="longbar">
                                <input type="checkbox" class="mustCondi" name="must1" id="must1"/>
                                <label for="must1">
                                    <span class="chk"></span>
                                    <span list="1">서비스 이용약관(필수)</span>
                                </label>
                                <i class="fas fa-chevron-right"></i>
                            </li>
                            <li class="longbar">
                                <input type="checkbox" class="mustCondi" name="must2" id="must2"/>
                                <label for="must2">
                                    <span class="chk"></span>
                                    <span list="2">개인정보 수집 및 이용동의(필수)</span>
                                </label>
                                <i class="fas fa-chevron-right"></i>
                            </li>
                            <li class="longbar">
                                <input type="checkbox" class="mustCondi" name="must3" id="must3"/>
                                <label for="must3">
                                    <span class="chk"></span>
                                    <span list="3">개인정보의 제3자 제공 동의(필수)</span>
                                </label>
                                <i class="fas fa-chevron-right"></i>
                            </li>
                        </ul>
                    </div>
                    
                    <div id="condiRight">
                        <p>선택약관</p>
                        <ul class="conditions" id="pick">
                            <li class="longbar">
                                <input type="checkbox" class="pickCondi" name="pick1" id="pick1"/>
                                <label for="pick1">
                                    <span class="chk"></span>
                                    <span list="1">위치기반서비스 이용약관 동의(선택)</span>
                                </label>
                                <i class="fas fa-chevron-right"></i>
                            </li>
                            <li class="longbar"> 
                                <input type="checkbox" class="pickCondi" name="pick2" id="pick2"/>
                                <label for="pick2">
                                    <span class="chk"></span>
                                    <span list="2">선택적인 수집/이용 동의(선택)</span>
                                </label>
                                <i class="fas fa-chevron-right"></i>
                            </li>
                            <li class="longbar">
                                <input type="checkbox" class="pickCondi" name="pick3" id="pick3"/>
                                <label for="pick3">
                                    <span class="chk"></span>
                                    <span list="3">프로모션 등 정보 이메일 수신 동의(선택)</span>
                                </label>
                                <i class="fas fa-chevron-right"></i>
                            </li>
                        </ul>
                    </div>
                    <div style="clear : both;"></div>
                    <button type="button" id="condiBtn" class="skyBtn">NEXT</button>
                </form>
<br><br>
<button id="termsCookie">쿠키 저장</button>
<button id="termsCookieCheck">쿠키 저장 확인</button><br>
<span id="check"></span>



</body>
</html>